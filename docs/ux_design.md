# 日報変換ツール UX設計書

## 1. UX戦略の概要

本プロジェクトでは、以下のような段階的なUX戦略を採用します：

1. **フェーズ1**: CLIインターフェースの実装（コア機能の開発に集中）
2. **フェーズ2**: Webベースのシンプルなインターフェース追加（CLIと同等機能）
3. **フェーズ3**: モバイル対応のレスポンシブWebアプリケーション
4. **フェーズ4**: （オプション）ネイティブモバイルアプリの提供

この段階的アプローチにより、以下のメリットが得られます：
- コア機能の早期開発と検証
- 段階的な機能追加とフィードバック反映
- 開発リソースの効率的な配分

## 2. CLIインターフェース設計

### 2.1 コマンド体系

```
daily-report [command] [options]
```

#### 主要コマンド

| コマンド | 説明 | オプション |
|---------|------|-----------|
| `create` | 新規日報作成 | `--date`, `--template` |
| `list` | 日報一覧表示 | `--month`, `--format` |
| `edit` | 既存日報編集 | `--id`, `--date` |
| `generate` | 月報生成 | `--month`, `--template`, `--output` |
| `config` | 設定変更 | `--set`, `--get`, `--list` |
| `template` | テンプレート管理 | `--add`, `--list`, `--edit` |

### 2.2 インタラクション設計

#### 日報作成フロー
1. `daily-report create` コマンド実行
2. 対話型フォームで各項目入力
   - 日付（デフォルト: 当日）
   - 勤務時間（開始・終了時間入力で稼働時間を自動計算）
   - 勤務場所（設定済みの選択肢から選択）
   - タスク状況（設定済みの選択肢から選択）
   - 実施タスク（テキスト入力、複数行対応）
   - 翌日の勤務場所（設定済みの選択肢から選択）
   - その他連絡事項（任意テキスト入力）
3. 入力内容の確認プロンプト表示
4. 確認後、日報データ保存

#### 月報生成フロー
1. `daily-report generate --month 2025-04` コマンド実行
2. 月報テンプレート選択プロンプト表示
3. AIプロンプト調整オプション（任意）
4. 生成処理実行（プログレスバー表示）
5. 生成結果のプレビュー表示
6. 保存先指定
7. 月報ファイル出力

### 2.3 ユーザビリティ向上策

- **カラー表示**: 重要情報やステータスを色分け
- **プログレスバー**: 長時間処理の進捗表示
- **自動補完**: 設定済み選択肢の自動補完
- **ヘルプテキスト**: 各コマンドの詳細なヘルプ情報
- **履歴機能**: 前回入力値をデフォルト表示
- **バリデーション**: 入力内容のリアルタイム検証

## 3. Webインターフェース設計（フェーズ2）

### 3.1 アーキテクチャ

- **フロントエンド**: React + TypeScript
- **バックエンド**: Express.js（既存のCLIロジックを活用）
- **デプロイ**: ローカル環境での実行（初期段階）

### 3.2 画面構成

#### メイン画面
- サイドナビゲーション（日報作成、一覧、設定など）
- カレンダービュー（日報が登録された日をハイライト）
- 最近の日報概要（直近5件）

#### 日報作成・編集画面
- フォーム形式の入力インターフェース
- リアルタイムプレビュー
- 下書き保存機能

#### 日報一覧・検索画面
- 月別フィルタリング
- キーワード検索
- ソート機能

#### 月報生成画面
- 期間選択
- テンプレート選択
- AIプロンプトカスタマイズ
- 生成結果プレビュー

### 3.3 レスポンシブ設計

- モバイルファーストアプローチ
- 画面サイズに応じたレイアウト変更
- タッチ操作最適化
- オフライン操作対応（PWA）

## 4. 実装優先順位とロードマップ

### フェーズ1：CLI実装（1〜2ヶ月）
- コア機能の実装
- 基本的なUXの最適化
- テスト・フィードバック収集

### フェーズ2：シンプルWeb UI実装（2〜3ヶ月）
- CLIと共通のビジネスロジック層
- 基本的なWeb UI
- データ同期機能

### フェーズ3：フル機能WebアプリとPWA（3〜4ヶ月）
- 高度なUI/UX機能
- モバイル対応の最適化
- オフライン機能拡充

### フェーズ4：（オプション）ネイティブアプリ（4〜6ヶ月）
- React Nativeによるネイティブアプリ開発
- プラットフォーム固有機能の活用
- アプリストア公開

## 5. CLIとGUIの統合戦略

### 5.1 共通コアライブラリ

共通のビジネスロジックをコアライブラリとして切り出し、CLIとGUIの両方からアクセスできるようにします。

```
daily-report-converter/
├── packages/
│   ├── core/          # 共通ビジネスロジック
│   ├── cli/           # CLIインターフェース
│   └── web/           # Webインターフェース
├── ...
```

### 5.2 データの整合性

- 共通のデータストレージ形式
- 変更の同期メカニズム
- コンフリクト解決戦略

### 5.3 機能パリティ

- CLI・GUIともに同等の機能を提供
- インターフェース固有の利点を活かした実装
  - CLI: バッチ処理、自動化、スクリプタビリティ
  - GUI: 視覚的フィードバック、ドラッグ＆ドロップ、グラフ表示

## 6. UX評価指標

### 6.1 定量的指標
- タスク完了時間
- エラー発生率
- 機能使用頻度
- 繰り返し使用率

### 6.2 定性的指標
- ユーザー満足度
- 学習容易性
- 記憶しやすさ
- 主観的効率性

## 7. フィードバックメカニズム

- 匿名使用統計収集（オプトイン）
- フィードバックフォーム
- 定期的なユーザーインタビュー
- A/Bテスト（Webインターフェース）

## 8. アクセシビリティ配慮

### 8.1 CLI
- スクリーンリーダー対応
- カラーコントラスト最適化
- キーボードナビゲーション

### 8.2 GUI
- WAI-ARIA対応
- キーボードショートカット
- フォントサイズ調整
- ハイコントラストモード

## 9. まとめと次のステップ

フェーズ1のCLIインターフェース開発を優先しつつ、フェーズ2以降のWeb UI開発に向けた設計とアーキテクチャ選定を並行して進めることで、効率的な開発と段階的な機能拡張を実現します。

初期段階では機能開発に集中し、ユーザーフィードバックを収集した後でUI/UX改善を行う方針とします。ただし、初期段階からユーザビリティを考慮した設計を行うことで、後の大幅な設計変更を避けます。